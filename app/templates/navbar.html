{% load static %}
<nav class="bg-white shadow-lg px-4 py-4 md:px-8 relative z-50">
  <div class="max-w-7xl mx-auto flex items-center justify-between flex-wrap">
    <!-- Logo -->
    <div class="flex items-center">
      <p class="text-3xl font-extrabold bg-gradient-to-r from-gray-700 via-purple-800 to-indigo-900 text-transparent bg-clip-text tracking-tight">Phoxia</p>
    </div>

    <!-- Toggle Checkbox -->
    <input type="checkbox" id="menu-toggle" class="hidden peer/menu" />

    <!-- Hamburger Icon -->
    <label for="menu-toggle" class="md:hidden block cursor-pointer text-gray-700 hover:text-gray-900 transition-all duration-300">
      <svg class="w-8 h-8" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
      </svg>
    </label>

    <!-- Dark Overlay (mobile only) -->
    <label for="menu-toggle" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden peer-checked/menu:block md:hidden"></label>

    <!-- Sidebar Menu -->
    <div class="fixed top-0 right-0 h-full w-64 bg-white shadow-xl translate-x-full peer-checked/menu:translate-x-0 transition-transform duration-300 ease-in-out md:static md:w-auto md:h-auto md:shadow-none md:translate-x-0 md:flex md:items-center md:justify-between md:flex-row md:space-x-8 z-50">

      <!-- Close button (mobile only) -->
      <div class="p-6 md:hidden flex justify-end">
        <label for="menu-toggle" class="cursor-pointer text-gray-700 hover:text-gray-900 transition-all duration-300">
          <svg class="w-8 h-8" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </label>
      </div>

      <!-- Menu Content -->
      <div class="flex flex-col md:flex-row items-center gap-6 md:gap-8 px-6 md:px-0 pb-6 md:pb-0 w-full">
        <!-- Search -->
        <form action="/search" method="GET" class="flex items-center space-x-3 w-full md:w-auto">
          <input
            type="text"
            name="username"
            placeholder="Search Phoxia..."
            class="w-full md:min-w-[250px] lg:min-w-[300px] px-4 py-2 border border-gray-300 rounded-full focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all duration-200 placeholder-gray-400 text-gray-700"
          />
          <button
            type="submit"
            class="bg-blue-600 hover:bg-blue-700 text-white px-5 py-2 rounded-full font-semibold shadow-md transition-all duration-300 transform hover:scale-105 active:scale-95 flex-shrink-0"
          >
            Search
          </button>
        </form>

        <!-- Navigation Icons -->
        <div class="flex flex-col md:flex-row items-center gap-6 md:gap-8 mt-6 md:mt-0 w-full md:w-auto">
          <a href="/" class="group">
            <svg class="w-7 h-7 text-gray-700 group-hover:text-black transition-all duration-300 transform group-hover:scale-110" fill="#262626" viewBox="0 0 48 48">
              <path d="M45.5 48H30.1c-.8 0-1.5-.7-1.5-1.5V34.2c0-2.6-2.1-4.6-4.6-4.6s-4.6 2.1-4.6 4.6v12.3c0 .8-.7 1.5-1.5 1.5H2.5c-.8 0-1.5-.7-1.5-1.5V23c0-.4.2-.8.4-1.1L22.9.4c.6-.6 1.6-.6 2.1 0l21.5 21.5c.3.3.4.7.4 1.1v23.5c.1.8-.6 1.5-1.4 1.5z"/>
            </svg>
          </a>

          <a href="/uploadpost" class="group">
            <img src="{% static './images/add (1).PNG' %}" alt="Upload" class="w-7 h-7 object-contain transition-all duration-300 transform group-hover:scale-110" />
          </a>

          <a href="/profile" class="flex items-center group">
            {% if profile.profile_picture %}
              <img
                src="{{ profile.profile_picture.url }}"
                alt="Profile Picture"
                class="w-9 h-9 rounded-full object-cover border-2 border-gray-300 group-hover:border-blue-500 transition-all duration-300 transform group-hover:scale-110"
              />
            {% else %}
              <img
                src="{% static './images/default_profile.png' %}"
                alt="Default Profile Picture"
                class="w-9 h-9 rounded-full object-cover border-2 border-gray-300 group-hover:border-blue-500 transition-all duration-300 transform group-hover:scale-110"
              />
            {% endif %}
          </a>

          <a href="/logout" class="bg-red-500 text-white px-5 py-2 rounded-full font-semibold text-base shadow-md hover:bg-red-600 transition-all duration-300 transform hover:scale-105 active:scale-95 w-full md:w-auto text-center">
            Logout
          </a>
        </div>
      </div>
    </div>
  </div>
</nav>
